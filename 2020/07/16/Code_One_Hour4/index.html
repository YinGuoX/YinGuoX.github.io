<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="King">
  <meta name="keywords" content="">
  <title>Code One Hour：Pandas-Base-Two - 因果</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css" />

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link  rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css" />




<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>因果</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">现今</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">旧日</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">关于</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/code_one_hour/title5.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
                <p class="mt-3 post-meta">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                  星期四, 七月 16日 2020, 10:46 晚上
                </p>
              

              <p class="mt-1">
                
                  
                  <span class="post-meta">
                    <i class="far fa-chart-bar"></i>
                    9.1k 字
                  </span>
                

                
                  
                  <span class="post-meta">
                      <i class="far fa-clock"></i>
                    
                    
                    164
                     分钟
                  </span>
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  <span id="busuanzi_container_page_pv" class="post-meta" style="display: none">
                    <i class="far fa-eye" aria-hidden="true"></i>
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <div class="markdown-body">
              <h1 id="Pandas使用-基础篇Two"><a href="#Pandas使用-基础篇Two" class="headerlink" title="Pandas使用-基础篇Two"></a>Pandas使用-基础篇Two</h1><h2 id="1-datetime的使用"><a href="#1-datetime的使用" class="headerlink" title="1. datetime的使用"></a>1. datetime的使用</h2><ul>
<li>datetime模块：主要掌握:datetime.date(),datetime.datetime().datetime.timedelta()</li>
<li>日期解析方法：parser.parse</li>
</ul>
<pre><code class="lang-python">import datetime

# 获取当天日期
print(&quot;datetime.date.today()的使用：&quot;)
today = datetime.date.today()
print(&quot;today:&quot;,today)
print(&quot;type(today):&quot;)
print(type(today))
print(&quot;datetime.date()的使用：&quot;)
t = datetime.date(2016,6,1)
print(t)
print(&quot;-----------------------------&quot;)
print(&quot;datetime.date.now()的使用：&quot;)
now = datetime.datetime.now()
print(&quot;now:&quot;,now)
print(&quot;type(now):&quot;,type(now))
print(&quot;datetime.datetime()的使用：&quot;)
# 至少得输入年月日
t1 = datetime.datetime(2016,6,1)
t2 = datetime.datetime(2014,1,1,12,44,33)
print(&quot;t1:&quot;,t1)
print(&quot;t2:&quot;,t2)
print(&quot;-----------------------------&quot;)
print(&quot;datetime.timedelta()的用法&quot;)
# 设置为1天
print(datetime.timedelta(1))
today = datetime.datetime.today()
yestoday = today-datetime.timedelta(7)
print(today)
print(yestoday)
</code></pre>
<pre><code>datetime.date.today()的使用：
today: 2020-07-16
type(today):
&lt;class &#39;datetime.date&#39;&gt;
datetime.date()的使用：
2016-06-01
-----------------------------
datetime.date.now()的使用：
now: 2020-07-16 15:16:12.220098
type(now): &lt;class &#39;datetime.datetime&#39;&gt;
datetime.datetime()的使用：
t1: 2016-06-01 00:00:00
t2: 2014-01-01 12:44:33
-----------------------------
datetime.timedelta()的用法
1 day, 0:00:00
2020-07-16 15:16:12.220098
2020-07-09 15:16:12.220098
</code></pre><pre><code class="lang-python">from dateutil.parser import parse
print(&quot;使用parse()来实现日期字符串转换&quot;)
date = &#39;12-21-2017&#39;
t = parse(date)
print(&quot;t:&quot;,t)
print(&quot;type(t):&quot;,type(t))
# 各种格式的日期字符串都可以解析，但是无法解析中文
print(parse(&#39;2000-1-1&#39;),&#39;\n&#39;,
     parse(&#39;5/1/2014&#39;),&#39;\n&#39;,
      parse(&#39;5/1/2014&#39;,dayfirst=True),&#39;\n&#39;,
      parse(&#39;Jan 31, 1997 10:45 PM&#39;)
     )
</code></pre>
<pre><code>使用parse()来实现日期字符串转换
t: 2017-12-21 00:00:00
type(t): &lt;class &#39;datetime.datetime&#39;&gt;
2000-01-01 00:00:00 
 2014-05-01 00:00:00 
 2014-01-05 00:00:00 
 1997-01-31 22:45:00
</code></pre><h2 id="2-Pandas的时刻数据类型-：-Timestamp"><a href="#2-Pandas的时刻数据类型-：-Timestamp" class="headerlink" title="2. Pandas的时刻数据类型 ： Timestamp"></a>2. Pandas的时刻数据类型 ： Timestamp</h2><ul>
<li>时刻数据是代表时间点，是pandas的数据类型，是将值与时间点相关联的最基本类型的时间序列数据。</li>
<li>pandas.Timestamp()</li>
</ul>
<pre><code class="lang-python">import numpy as np
import pandas as pd

date1 = datetime.datetime(2016,12,1,12,45,30)
date2 = &#39;2017-12-21&#39;
t1 = pd.Timestamp(date1)
t2 = pd.Timestamp(date2)
print(&quot;t1:&quot;,t1)
print(&quot;type(t1):&quot;,type(t1))
print(&quot;t2:&quot;,t2)
print(&quot;type(t2):&quot;,type(t2))
print(pd.Timestamp(&#39;2020-12-21 15:00:22&#39;))
</code></pre>
<pre><code>t1: 2016-12-01 12:45:30
type(t1): &lt;class &#39;pandas._libs.tslibs.timestamps.Timestamp&#39;&gt;
t2: 2017-12-21 00:00:00
type(t2): &lt;class &#39;pandas._libs.tslibs.timestamps.Timestamp&#39;&gt;
2020-12-21 15:00:22
</code></pre><pre><code class="lang-python">
# pd.to_datetime()：如果是单个时间数据，转换成pandas的时刻数据，数据类型为Timestamp
date1 = datetime.datetime(2016,12,1,12,45,30)
date2 = &#39;2017-12-23&#39;
t1 = pd.to_datetime(date1)
t2 = pd.to_datetime(date2)
print(&quot;t1:&quot;,t1)
print(&quot;type(t1):&quot;,type(t1))
print(&quot;t2:&quot;,t2)
print(&quot;type(t2):&quot;,type(t2))

# 多个时间数据，将会转换为pandas的DatetimeIndex
lst_date = [ &#39;2017-12-21&#39;, &#39;2017-12-22&#39;, &#39;2017-12-23&#39;]
t3 = pd.to_datetime(lst_date)
print(&quot;t3:&quot;,t3)
print(&quot;type(t3):&quot;,type(t3))
</code></pre>
<pre><code>t1: 2016-12-01 12:45:30
type(t1): &lt;class &#39;pandas._libs.tslibs.timestamps.Timestamp&#39;&gt;
t2: 2017-12-23 00:00:00
type(t2): &lt;class &#39;pandas._libs.tslibs.timestamps.Timestamp&#39;&gt;
t3: DatetimeIndex([&#39;2017-12-21&#39;, &#39;2017-12-22&#39;, &#39;2017-12-23&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)
type(t3): &lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
</code></pre><pre><code class="lang-python"># 当一组时间序列中夹杂其他格式数据，可用errors参数返回
# errors = &#39;ignore&#39;:不可解析时返回原始输入，这里就是直接生成一般数组
date3 = [&#39;2017-2-1&#39;,&#39;2017-2-2&#39;,&#39;2017-2-3&#39;,&#39;hello world!&#39;,&#39;2017-2-5&#39;,&#39;2017-2-6&#39;]
t3 = pd.to_datetime(date3, errors = &#39;ignore&#39;)
print(t3,type(t3))

# errors = &#39;coerce&#39;:不可扩展，缺失值返回NaT（Not a Time），结果认为DatetimeIndex
t4 = pd.to_datetime(date3, errors = &#39;coerce&#39;)
print(t4,type(t4))
</code></pre>
<pre><code>Index([&#39;2017-2-1&#39;, &#39;2017-2-2&#39;, &#39;2017-2-3&#39;, &#39;hello world!&#39;, &#39;2017-2-5&#39;,
       &#39;2017-2-6&#39;],
      dtype=&#39;object&#39;) &lt;class &#39;pandas.core.indexes.base.Index&#39;&gt;
DatetimeIndex([&#39;2017-02-01&#39;, &#39;2017-02-02&#39;, &#39;2017-02-03&#39;, &#39;NaT&#39;, &#39;2017-02-05&#39;,
               &#39;2017-02-06&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None) &lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
</code></pre><h2 id="3-Pandas的时间戳索引数据类型：DatetimeIndex"><a href="#3-Pandas的时间戳索引数据类型：DatetimeIndex" class="headerlink" title="3. Pandas的时间戳索引数据类型：DatetimeIndex"></a>3. Pandas的时间戳索引数据类型：DatetimeIndex</h2><p>多个Timestamp组成的DatetimeIndex</p>
<ul>
<li>核心：pd.date_range()</li>
</ul>
<pre><code class="lang-python">print(&quot;直接生成时间戳索引：pd.DatetimeIndex()&quot;)
rng = pd.DatetimeIndex([&#39;12/1/2017&#39;,&#39;12/2/2017&#39;,&#39;12/3/2017&#39;,&#39;12/4/2017&#39;,&#39;12/5/2017&#39;])
print(rng,type(rng))
print(&quot;rng[0]: &quot;,rng[0])
print(&quot;type(rng[0]): &quot;,type(rng[0]))

print(&quot;创建以时间戳为索引的Series&quot;)
st = pd.Series(np.random.rand(len(rng)),index =rng)
print(st)
print(type(st))
</code></pre>
<pre><code>直接生成时间戳索引：pd.DatetimeIndex()
DatetimeIndex([&#39;2017-12-01&#39;, &#39;2017-12-02&#39;, &#39;2017-12-03&#39;, &#39;2017-12-04&#39;,
               &#39;2017-12-05&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None) &lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
rng[0]:  2017-12-01 00:00:00
type(rng[0]):  &lt;class &#39;pandas._libs.tslibs.timestamps.Timestamp&#39;&gt;
创建以时间戳为索引的Series
2017-12-01    0.395008
2017-12-02    0.051371
2017-12-03    0.177591
2017-12-04    0.884927
2017-12-05    0.704827
dtype: float64
&lt;class &#39;pandas.core.series.Series&#39;&gt;
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex:日期范围&quot;)
# 2种生成方式：①start + end； ②start/end + periods
# pd.date_range(start=None, end=None, periods=None, freq=&#39;D&#39;, tz=None, normalize=False, name=None, closed=None, **kwargs)
# start：开始时间
# end：结束时间
# periods：偏移量
# freq：频率，默认天，pd.date_range()默认频率为日历日，pd.bdate_range()默认频率为工作日
# tz：时区
# normalize：时间参数值正则化到午夜时间戳（这里最后就直接变成0:00:00，并不是15:30:00）
# name：索引对象名称
# closed：默认为None的情况下，左闭右闭，left则左闭右开，right则左开右闭
rng1 = pd.date_range(&#39;1/1/2017&#39;,&#39;1/10/2017&#39;, normalize=True)
rng2 = pd.date_range(start = &#39;1/1/2017&#39;, periods = 10)
rng3 = pd.date_range(end = &#39;1/30/2017 15:00:00&#39;, periods = 10)  # 增加了时、分、秒
print(rng1)
print(type(rng1))
print(rng2)
print(type(rng2))
print(rng3)
print(type(rng3))
rng4 = pd.date_range(start = &#39;1/1/2017 15:30&#39;, periods = 10, name = &#39;hello world!&#39;, normalize = True)
print(rng4)
print(pd.date_range(&#39;20170101&#39;,&#39;20170104&#39;))  # 20170101也可读取
print(pd.date_range(&#39;20170101&#39;,&#39;20170104&#39;,closed = &#39;right&#39;))
print(pd.date_range(&#39;20170101&#39;,&#39;20170104&#39;,closed = &#39;left&#39;))
# 直接转化为list，元素为Timestamp
print(list(pd.date_range(start = &#39;1/1/2017&#39;, periods = 10)))

print(&quot;-----------------------------------------------------------------&quot;)
print(&quot;pd.bdate_range()默认频率为工作日&quot;)
# pd.bdate_range()默认频率为工作日
print(pd.bdate_range(&#39;20170101&#39;,&#39;20170107&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex:日期范围
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;,
               &#39;2017-01-05&#39;, &#39;2017-01-06&#39;, &#39;2017-01-07&#39;, &#39;2017-01-08&#39;,
               &#39;2017-01-09&#39;, &#39;2017-01-10&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
&lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;,
               &#39;2017-01-05&#39;, &#39;2017-01-06&#39;, &#39;2017-01-07&#39;, &#39;2017-01-08&#39;,
               &#39;2017-01-09&#39;, &#39;2017-01-10&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
&lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
DatetimeIndex([&#39;2017-01-21 15:00:00&#39;, &#39;2017-01-22 15:00:00&#39;,
               &#39;2017-01-23 15:00:00&#39;, &#39;2017-01-24 15:00:00&#39;,
               &#39;2017-01-25 15:00:00&#39;, &#39;2017-01-26 15:00:00&#39;,
               &#39;2017-01-27 15:00:00&#39;, &#39;2017-01-28 15:00:00&#39;,
               &#39;2017-01-29 15:00:00&#39;, &#39;2017-01-30 15:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
&lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;,
               &#39;2017-01-05&#39;, &#39;2017-01-06&#39;, &#39;2017-01-07&#39;, &#39;2017-01-08&#39;,
               &#39;2017-01-09&#39;, &#39;2017-01-10&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;hello world!&#39;, freq=&#39;D&#39;)
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
DatetimeIndex([&#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
[Timestamp(&#39;2017-01-01 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-02 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-03 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-04 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-05 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-06 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-07 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-08 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-09 00:00:00&#39;, freq=&#39;D&#39;), Timestamp(&#39;2017-01-10 00:00:00&#39;, freq=&#39;D&#39;)]
-----------------------------------------------------------------
pd.bdate_range()默认频率为工作日
DatetimeIndex([&#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;, &#39;2017-01-05&#39;,
               &#39;2017-01-06&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex: 改变频率(简单)&quot;)
# 默认freq = &#39;D&#39;：每日历日
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2017/1/4&#39;))
# B：每工作日
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2017/1/4&#39;,freq=&#39;B&#39;))
# H：每小时
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2017/1/2&#39;,freq=&#39;H&#39;))
# T/MIN：每分
print(pd.date_range(&#39;2017/1/1 12:00&#39;,&#39;2017/1/1 12:10&#39;,freq=&#39;T&#39;))
# S：每秒
print(pd.date_range(&#39;2017/1/1 12:00&#39;,&#39;2017/1/1 12:00:30&#39;,freq=&#39;S&#39;)[3])
# L：每毫秒（千分之一秒）
print(pd.date_range(&#39;2017/1/1 12:00&#39;,&#39;2017/1/1 12:00:10&#39;,freq=&#39;L&#39;))
# U：每微秒（百万分之一秒）
print(pd.date_range(&#39;2017/1/1 12:00&#39;,&#39;2017/1/1 12:00:10&#39;,freq=&#39;U&#39;))
# W-MON：从指定星期几开始算起，每周
print(pd.date_range(&#39;2020/7/1&#39;,&#39;2020/7/16&#39;,freq=&#39;W-MON&#39;))
# 星期几缩写：MON/TUE/WED/THU/FRI/SAT/SUN
# WOM-2MON：每月的第几个星期几开始算，这里是每月第二个星期一
print(pd.date_range(&#39;2020/7/1&#39;,&#39;2020/7/16&#39;,freq=&#39;WOM-2MON&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex: 改变频率(简单)
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
DatetimeIndex([&#39;2017-01-02&#39;, &#39;2017-01-03&#39;, &#39;2017-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)
DatetimeIndex([&#39;2017-01-01 00:00:00&#39;, &#39;2017-01-01 01:00:00&#39;,
               &#39;2017-01-01 02:00:00&#39;, &#39;2017-01-01 03:00:00&#39;,
               &#39;2017-01-01 04:00:00&#39;, &#39;2017-01-01 05:00:00&#39;,
               &#39;2017-01-01 06:00:00&#39;, &#39;2017-01-01 07:00:00&#39;,
               &#39;2017-01-01 08:00:00&#39;, &#39;2017-01-01 09:00:00&#39;,
               &#39;2017-01-01 10:00:00&#39;, &#39;2017-01-01 11:00:00&#39;,
               &#39;2017-01-01 12:00:00&#39;, &#39;2017-01-01 13:00:00&#39;,
               &#39;2017-01-01 14:00:00&#39;, &#39;2017-01-01 15:00:00&#39;,
               &#39;2017-01-01 16:00:00&#39;, &#39;2017-01-01 17:00:00&#39;,
               &#39;2017-01-01 18:00:00&#39;, &#39;2017-01-01 19:00:00&#39;,
               &#39;2017-01-01 20:00:00&#39;, &#39;2017-01-01 21:00:00&#39;,
               &#39;2017-01-01 22:00:00&#39;, &#39;2017-01-01 23:00:00&#39;,
               &#39;2017-01-02 00:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)
DatetimeIndex([&#39;2017-01-01 12:00:00&#39;, &#39;2017-01-01 12:01:00&#39;,
               &#39;2017-01-01 12:02:00&#39;, &#39;2017-01-01 12:03:00&#39;,
               &#39;2017-01-01 12:04:00&#39;, &#39;2017-01-01 12:05:00&#39;,
               &#39;2017-01-01 12:06:00&#39;, &#39;2017-01-01 12:07:00&#39;,
               &#39;2017-01-01 12:08:00&#39;, &#39;2017-01-01 12:09:00&#39;,
               &#39;2017-01-01 12:10:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;T&#39;)
2017-01-01 12:00:03
DatetimeIndex([       &#39;2017-01-01 12:00:00&#39;, &#39;2017-01-01 12:00:00.001000&#39;,
               &#39;2017-01-01 12:00:00.002000&#39;, &#39;2017-01-01 12:00:00.003000&#39;,
               &#39;2017-01-01 12:00:00.004000&#39;, &#39;2017-01-01 12:00:00.005000&#39;,
               &#39;2017-01-01 12:00:00.006000&#39;, &#39;2017-01-01 12:00:00.007000&#39;,
               &#39;2017-01-01 12:00:00.008000&#39;, &#39;2017-01-01 12:00:00.009000&#39;,
               ...
               &#39;2017-01-01 12:00:09.991000&#39;, &#39;2017-01-01 12:00:09.992000&#39;,
               &#39;2017-01-01 12:00:09.993000&#39;, &#39;2017-01-01 12:00:09.994000&#39;,
               &#39;2017-01-01 12:00:09.995000&#39;, &#39;2017-01-01 12:00:09.996000&#39;,
               &#39;2017-01-01 12:00:09.997000&#39;, &#39;2017-01-01 12:00:09.998000&#39;,
               &#39;2017-01-01 12:00:09.999000&#39;,        &#39;2017-01-01 12:00:10&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=10001, freq=&#39;L&#39;)
DatetimeIndex([       &#39;2017-01-01 12:00:00&#39;, &#39;2017-01-01 12:00:00.000001&#39;,
               &#39;2017-01-01 12:00:00.000002&#39;, &#39;2017-01-01 12:00:00.000003&#39;,
               &#39;2017-01-01 12:00:00.000004&#39;, &#39;2017-01-01 12:00:00.000005&#39;,
               &#39;2017-01-01 12:00:00.000006&#39;, &#39;2017-01-01 12:00:00.000007&#39;,
               &#39;2017-01-01 12:00:00.000008&#39;, &#39;2017-01-01 12:00:00.000009&#39;,
               ...
               &#39;2017-01-01 12:00:09.999991&#39;, &#39;2017-01-01 12:00:09.999992&#39;,
               &#39;2017-01-01 12:00:09.999993&#39;, &#39;2017-01-01 12:00:09.999994&#39;,
               &#39;2017-01-01 12:00:09.999995&#39;, &#39;2017-01-01 12:00:09.999996&#39;,
               &#39;2017-01-01 12:00:09.999997&#39;, &#39;2017-01-01 12:00:09.999998&#39;,
               &#39;2017-01-01 12:00:09.999999&#39;,        &#39;2017-01-01 12:00:10&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=10000001, freq=&#39;U&#39;)
DatetimeIndex([&#39;2020-07-06&#39;, &#39;2020-07-13&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-MON&#39;)
DatetimeIndex([&#39;2020-07-13&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;WOM-2MON&#39;)
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex: 改变频率(复杂)&quot;)

# M：每月最后一个日历日
print(pd.date_range(&#39;2017&#39;,&#39;2018&#39;,freq=&#39;M&#39;))

# 月缩写：JAN/FEB/MAR/APR/MAY/JUN/JUL/AUG/SEP/OCT/NOV/DEC
# Q-月：指定月为季度末，每个季度末最后一月的最后一个日历日
# 所以Q-月只有三种情况：1-4-7-10,2-5-8-11,3-6-9-12
print(pd.date_range(&#39;2017&#39;,&#39;2018&#39;, freq = &#39;Q-MAY&#39;))  
# A-月：每年指定月份的最后一个日历日
print(pd.date_range(&#39;2017&#39;,&#39;2018&#39;,freq=&#39;A-OCT&#39;))

# BM：每月最后一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2018&#39;,freq=&#39;BM&#39;))

# BQ-月：指定月为季度末，每个季度末（所指定月份+3是下一个季度）最后一月的最后一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;BQ-MAY&#39;)) 

# BA-月：每年指定月份的最后一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;BA-DEC&#39;))


# MS：每月第一个日历日
print(pd.date_range(&#39;2017&#39;,&#39;2018&#39;, freq = &#39;MS&#39;)) 

# Q-月：指定月为季度末，每个季度末最后一月的第一个日历日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;QS-DEC&#39;))

# A-月：每年指定月份的第一个日历日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;AS-DEC&#39;))

# BMS：每月第一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;BMS&#39;))

# BQ-月：指定月为季度末，每个季度末最后一月的第一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;BQS-DEC&#39;))  

# BA-月：每年指定月份的第一个工作日
print(pd.date_range(&#39;2017&#39;,&#39;2020&#39;, freq = &#39;BAS-DEC&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex: 改变频率(复杂)
DatetimeIndex([&#39;2017-01-31&#39;, &#39;2017-02-28&#39;, &#39;2017-03-31&#39;, &#39;2017-04-30&#39;,
               &#39;2017-05-31&#39;, &#39;2017-06-30&#39;, &#39;2017-07-31&#39;, &#39;2017-08-31&#39;,
               &#39;2017-09-30&#39;, &#39;2017-10-31&#39;, &#39;2017-11-30&#39;, &#39;2017-12-31&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;M&#39;)
DatetimeIndex([&#39;2017-02-28&#39;, &#39;2017-05-31&#39;, &#39;2017-08-31&#39;, &#39;2017-11-30&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;Q-MAY&#39;)
DatetimeIndex([&#39;2017-10-31&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;A-OCT&#39;)
DatetimeIndex([&#39;2017-01-31&#39;, &#39;2017-02-28&#39;, &#39;2017-03-31&#39;, &#39;2017-04-28&#39;,
               &#39;2017-05-31&#39;, &#39;2017-06-30&#39;, &#39;2017-07-31&#39;, &#39;2017-08-31&#39;,
               &#39;2017-09-29&#39;, &#39;2017-10-31&#39;, &#39;2017-11-30&#39;, &#39;2017-12-29&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BM&#39;)
DatetimeIndex([&#39;2017-02-28&#39;, &#39;2017-05-31&#39;, &#39;2017-08-31&#39;, &#39;2017-11-30&#39;,
               &#39;2018-02-28&#39;, &#39;2018-05-31&#39;, &#39;2018-08-31&#39;, &#39;2018-11-30&#39;,
               &#39;2019-02-28&#39;, &#39;2019-05-31&#39;, &#39;2019-08-30&#39;, &#39;2019-11-29&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BQ-MAY&#39;)
DatetimeIndex([&#39;2017-12-29&#39;, &#39;2018-12-31&#39;, &#39;2019-12-31&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;BA-DEC&#39;)
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-02-01&#39;, &#39;2017-03-01&#39;, &#39;2017-04-01&#39;,
               &#39;2017-05-01&#39;, &#39;2017-06-01&#39;, &#39;2017-07-01&#39;, &#39;2017-08-01&#39;,
               &#39;2017-09-01&#39;, &#39;2017-10-01&#39;, &#39;2017-11-01&#39;, &#39;2017-12-01&#39;,
               &#39;2018-01-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;MS&#39;)
DatetimeIndex([&#39;2017-03-01&#39;, &#39;2017-06-01&#39;, &#39;2017-09-01&#39;, &#39;2017-12-01&#39;,
               &#39;2018-03-01&#39;, &#39;2018-06-01&#39;, &#39;2018-09-01&#39;, &#39;2018-12-01&#39;,
               &#39;2019-03-01&#39;, &#39;2019-06-01&#39;, &#39;2019-09-01&#39;, &#39;2019-12-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;QS-DEC&#39;)
DatetimeIndex([&#39;2017-12-01&#39;, &#39;2018-12-01&#39;, &#39;2019-12-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;AS-DEC&#39;)
DatetimeIndex([&#39;2017-01-02&#39;, &#39;2017-02-01&#39;, &#39;2017-03-01&#39;, &#39;2017-04-03&#39;,
               &#39;2017-05-01&#39;, &#39;2017-06-01&#39;, &#39;2017-07-03&#39;, &#39;2017-08-01&#39;,
               &#39;2017-09-01&#39;, &#39;2017-10-02&#39;, &#39;2017-11-01&#39;, &#39;2017-12-01&#39;,
               &#39;2018-01-01&#39;, &#39;2018-02-01&#39;, &#39;2018-03-01&#39;, &#39;2018-04-02&#39;,
               &#39;2018-05-01&#39;, &#39;2018-06-01&#39;, &#39;2018-07-02&#39;, &#39;2018-08-01&#39;,
               &#39;2018-09-03&#39;, &#39;2018-10-01&#39;, &#39;2018-11-01&#39;, &#39;2018-12-03&#39;,
               &#39;2019-01-01&#39;, &#39;2019-02-01&#39;, &#39;2019-03-01&#39;, &#39;2019-04-01&#39;,
               &#39;2019-05-01&#39;, &#39;2019-06-03&#39;, &#39;2019-07-01&#39;, &#39;2019-08-01&#39;,
               &#39;2019-09-02&#39;, &#39;2019-10-01&#39;, &#39;2019-11-01&#39;, &#39;2019-12-02&#39;,
               &#39;2020-01-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BMS&#39;)
DatetimeIndex([&#39;2017-03-01&#39;, &#39;2017-06-01&#39;, &#39;2017-09-01&#39;, &#39;2017-12-01&#39;,
               &#39;2018-03-01&#39;, &#39;2018-06-01&#39;, &#39;2018-09-03&#39;, &#39;2018-12-03&#39;,
               &#39;2019-03-01&#39;, &#39;2019-06-03&#39;, &#39;2019-09-02&#39;, &#39;2019-12-02&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BQS-DEC&#39;)
DatetimeIndex([&#39;2017-12-01&#39;, &#39;2018-12-03&#39;, &#39;2019-12-02&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;BAS-DEC&#39;)
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex: 复合频率&quot;)
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2017/2/1&#39;,freq=&#39;7D&#39;))
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2017/2/1&#39;,freq=&#39;2h30min&#39;))
# 每间隔2月，每月最后一个日历日
print(pd.date_range(&#39;2017/1/1&#39;,&#39;2018/2/1&#39;,freq=&#39;2M&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex: 复合频率
DatetimeIndex([&#39;2017-01-01&#39;, &#39;2017-01-08&#39;, &#39;2017-01-15&#39;, &#39;2017-01-22&#39;,
               &#39;2017-01-29&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;7D&#39;)
DatetimeIndex([&#39;2017-01-01 00:00:00&#39;, &#39;2017-01-01 02:30:00&#39;,
               &#39;2017-01-01 05:00:00&#39;, &#39;2017-01-01 07:30:00&#39;,
               &#39;2017-01-01 10:00:00&#39;, &#39;2017-01-01 12:30:00&#39;,
               &#39;2017-01-01 15:00:00&#39;, &#39;2017-01-01 17:30:00&#39;,
               &#39;2017-01-01 20:00:00&#39;, &#39;2017-01-01 22:30:00&#39;,
               ...
               &#39;2017-01-31 00:00:00&#39;, &#39;2017-01-31 02:30:00&#39;,
               &#39;2017-01-31 05:00:00&#39;, &#39;2017-01-31 07:30:00&#39;,
               &#39;2017-01-31 10:00:00&#39;, &#39;2017-01-31 12:30:00&#39;,
               &#39;2017-01-31 15:00:00&#39;, &#39;2017-01-31 17:30:00&#39;,
               &#39;2017-01-31 20:00:00&#39;, &#39;2017-01-31 22:30:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, length=298, freq=&#39;150T&#39;)
DatetimeIndex([&#39;2017-01-31&#39;, &#39;2017-03-31&#39;, &#39;2017-05-31&#39;, &#39;2017-07-31&#39;,
               &#39;2017-09-30&#39;, &#39;2017-11-30&#39;, &#39;2018-01-31&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;2M&#39;)
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex：asfreq()：频率转换&quot;)
ts = pd.Series(np.random.rand(4),index=pd.date_range(&#39;20170101&#39;,&#39;20170104&#39;))
print(ts)
# 改变频率，这里是D改为4H
# method：插值模式，None不插值，ffill用之前值填充，bfill用之后值填充
print(ts.asfreq(&#39;4H&#39;,method=&#39;ffill&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex：asfreq()：频率转换
2017-01-01    0.920231
2017-01-02    0.207496
2017-01-03    0.608860
2017-01-04    0.994574
Freq: D, dtype: float64
2017-01-01 00:00:00    0.920231
2017-01-01 04:00:00    0.920231
2017-01-01 08:00:00    0.920231
2017-01-01 12:00:00    0.920231
2017-01-01 16:00:00    0.920231
2017-01-01 20:00:00    0.920231
2017-01-02 00:00:00    0.207496
2017-01-02 04:00:00    0.207496
2017-01-02 08:00:00    0.207496
2017-01-02 12:00:00    0.207496
2017-01-02 16:00:00    0.207496
2017-01-02 20:00:00    0.207496
2017-01-03 00:00:00    0.608860
2017-01-03 04:00:00    0.608860
2017-01-03 08:00:00    0.608860
2017-01-03 12:00:00    0.608860
2017-01-03 16:00:00    0.608860
2017-01-03 20:00:00    0.608860
2017-01-04 00:00:00    0.994574
Freq: 4H, dtype: float64
</code></pre><pre><code class="lang-python">print(&quot;通过pd.date_range()生成DatatimeIndex：shift():超前/滞后数据&quot;)
ts = pd.Series(np.random.rand(4),
              index = pd.date_range(&#39;20170101&#39;,&#39;20170104&#39;))
print(ts)
# 正数：数值后移（滞后）；负数：数值前移（超前）
print(ts.shift(2))
print(ts.shift(-2))
print(&#39;------------------------------------------&#39;)
# 计算变化百分比，这里计算：该时间戳与上一个时间戳相比，变化百分比
print(ts.shift(1))
per = ts/ts.shift(1) - 1
print(per)
print(&#39;------------------------------------------&#39;)
# 加上freq参数：对时间戳进行位移，而不是对数值进行位移
print(ts.shift(2, freq = &#39;D&#39;))
print(ts.shift(2, freq = &#39;T&#39;))
</code></pre>
<pre><code>通过pd.date_range()生成DatatimeIndex：shift():超前/滞后数据
2017-01-01    0.201028
2017-01-02    0.031863
2017-01-03    0.893629
2017-01-04    0.515929
Freq: D, dtype: float64
2017-01-01         NaN
2017-01-02         NaN
2017-01-03    0.201028
2017-01-04    0.031863
Freq: D, dtype: float64
2017-01-01    0.893629
2017-01-02    0.515929
2017-01-03         NaN
2017-01-04         NaN
Freq: D, dtype: float64
------------------------------------------
2017-01-01         NaN
2017-01-02    0.201028
2017-01-03    0.031863
2017-01-04    0.893629
Freq: D, dtype: float64
2017-01-01          NaN
2017-01-02    -0.841501
2017-01-03    27.046137
2017-01-04    -0.422659
Freq: D, dtype: float64
------------------------------------------
2017-01-03    0.201028
2017-01-04    0.031863
2017-01-05    0.893629
2017-01-06    0.515929
Freq: D, dtype: float64
2017-01-01 00:02:00    0.201028
2017-01-02 00:02:00    0.031863
2017-01-03 00:02:00    0.893629
2017-01-04 00:02:00    0.515929
Freq: D, dtype: float64
</code></pre><h2 id="4-Pandas的时期数据类型：Period"><a href="#4-Pandas的时期数据类型：Period" class="headerlink" title="4. Pandas的时期数据类型：Period"></a>4. Pandas的时期数据类型：Period</h2><ul>
<li>核心：pd.Period()</li>
</ul>
<pre><code class="lang-python">print(&quot;Period类型的创建：pd.Period()&quot;)
# 生成一个以2017-01开始，月为频率的时间构造器
# pd.Period()参数：一个时间戳 + freq 参数 
# freq 用于指明该 period 的长度，时间戳则说明该 period 在时间轴上的位置
p = pd.Period(&#39;2017&#39;,freq=&#39;M&#39;)
print(p)
print(type(p))
print(p+1)
print(p-1)
print(pd.Period(&#39;2012&#39;, freq = &#39;A-DEC&#39;)-1 )
</code></pre>
<pre><code>Period类型的创建：pd.Period()
2017-01
&lt;class &#39;pandas._libs.tslibs.period.Period&#39;&gt;
2017-02
2016-12
2011
</code></pre><pre><code class="lang-python">print(&quot;创建时期范围：pd.period_range()&quot;)
prng = pd.period_range(&#39;1/1/2011&#39;,&#39;1/1/2012&#39;,freq=&#39;M&#39;)
# 数据格式为PeriodIndex，单个数值为Period
print(prng)
print(type(prng))
print(prng[0])
print(type(prng[0]))


# Timestamp表示一个时间戳，是一个时间截面；Period是一个时期，是一个时间段
# 但两者作为index时区别不大
ts = pd.Series(np.random.rand(len(prng)), index = prng)
print(ts)
print(type(ts))
print(ts.index)
</code></pre>
<pre><code>创建时期范围：pd.period_range()
PeriodIndex([&#39;2011-01&#39;, &#39;2011-02&#39;, &#39;2011-03&#39;, &#39;2011-04&#39;, &#39;2011-05&#39;, &#39;2011-06&#39;,
             &#39;2011-07&#39;, &#39;2011-08&#39;, &#39;2011-09&#39;, &#39;2011-10&#39;, &#39;2011-11&#39;, &#39;2011-12&#39;,
             &#39;2012-01&#39;],
            dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)
&lt;class &#39;pandas.core.indexes.period.PeriodIndex&#39;&gt;
2011-01
&lt;class &#39;pandas._libs.tslibs.period.Period&#39;&gt;
2011-01    0.094839
2011-02    0.064211
2011-03    0.360466
2011-04    0.325529
2011-05    0.011122
2011-06    0.028898
2011-07    0.472708
2011-08    0.878215
2011-09    0.534711
2011-10    0.839625
2011-11    0.400283
2011-12    0.927877
2012-01    0.978354
Freq: M, dtype: float64
&lt;class &#39;pandas.core.series.Series&#39;&gt;
PeriodIndex([&#39;2011-01&#39;, &#39;2011-02&#39;, &#39;2011-03&#39;, &#39;2011-04&#39;, &#39;2011-05&#39;, &#39;2011-06&#39;,
             &#39;2011-07&#39;, &#39;2011-08&#39;, &#39;2011-09&#39;, &#39;2011-10&#39;, &#39;2011-11&#39;, &#39;2011-12&#39;,
             &#39;2012-01&#39;],
            dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)
</code></pre><pre><code class="lang-python">print(&quot;Period的频率转换：asfreq()&quot;)

p = pd.Period(&#39;2017&#39;,&#39;A-DEC&#39;)
print(p)
# 通过.asfreq(freq, method=None, how=None)方法转换成别的频率
print(p.asfreq(&#39;M&#39;, how = &#39;start&#39;))  # 也可写 how = &#39;s&#39;
print(p.asfreq(&#39;D&#39;, how = &#39;end&#39;)) 
prng = pd.period_range(&#39;2017&#39;,&#39;2018&#39;,freq = &#39;M&#39;)
ts1 = pd.Series(np.random.rand(len(prng)), index = prng)
ts2 = pd.Series(np.random.rand(len(prng)), index = prng.asfreq(&#39;D&#39;, how = &#39;start&#39;))
print(ts1.head(),len(ts1))
print(ts2.head(),len(ts2))
</code></pre>
<pre><code>Period的频率转换：asfreq()
2017
2017-01
2017-12-31
2017-01    0.824941
2017-02    0.642681
2017-03    0.584915
2017-04    0.197087
2017-05    0.046987
Freq: M, dtype: float64 13
2017-01-01    0.517180
2017-02-01    0.744525
2017-03-01    0.493964
2017-04-01    0.276243
2017-05-01    0.350304
Freq: D, dtype: float64 13
</code></pre><pre><code class="lang-python">print(&quot;时间戳(Timestamp)与时期Period之间的转换:to_period(),to_timestamp()&quot;)
rng = pd.date_range(&#39;2017/1/1&#39;,periods=10,freq=&#39;M&#39;)
prng = pd.period_range(&#39;2017&#39;,&#39;2018&#39;,freq=&#39;M&#39;)
print(rng)
print(prng)
ts1 = pd.Series(np.random.rand(len(rng)), index = rng)
print(ts1.head())

# 每月最后一日，转化为每月
print(ts1.to_period().head())

ts2 = pd.Series(np.random.rand(len(prng)), index = prng)
print(ts2.head())
# 每月，转化为每月第一天
print(ts2.to_timestamp().head())
</code></pre>
<pre><code>时间戳(Timestamp)与时期Period之间的转换:to_period(),to_timestamp()
DatetimeIndex([&#39;2017-01-31&#39;, &#39;2017-02-28&#39;, &#39;2017-03-31&#39;, &#39;2017-04-30&#39;,
               &#39;2017-05-31&#39;, &#39;2017-06-30&#39;, &#39;2017-07-31&#39;, &#39;2017-08-31&#39;,
               &#39;2017-09-30&#39;, &#39;2017-10-31&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;M&#39;)
PeriodIndex([&#39;2017-01&#39;, &#39;2017-02&#39;, &#39;2017-03&#39;, &#39;2017-04&#39;, &#39;2017-05&#39;, &#39;2017-06&#39;,
             &#39;2017-07&#39;, &#39;2017-08&#39;, &#39;2017-09&#39;, &#39;2017-10&#39;, &#39;2017-11&#39;, &#39;2017-12&#39;,
             &#39;2018-01&#39;],
            dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)
2017-01-31    0.960648
2017-02-28    0.248499
2017-03-31    0.961585
2017-04-30    0.865579
2017-05-31    0.423527
Freq: M, dtype: float64
2017-01    0.960648
2017-02    0.248499
2017-03    0.961585
2017-04    0.865579
2017-05    0.423527
Freq: M, dtype: float64
2017-01    0.573267
2017-02    0.063327
2017-03    0.127621
2017-04    0.045166
2017-05    0.193482
Freq: M, dtype: float64
2017-01-01    0.573267
2017-02-01    0.063327
2017-03-01    0.127621
2017-04-01    0.045166
2017-05-01    0.193482
Freq: MS, dtype: float64
</code></pre><h2 id="5-时间序列：索引、切片"><a href="#5-时间序列：索引、切片" class="headerlink" title="5. 时间序列：索引、切片"></a>5. 时间序列：索引、切片</h2><ul>
<li>TimeSeries是Series的一个子类，所以Series索引及数据选取方面的方法基本一样</li>
<li>同时TimeSeries通过时间序列有更便捷的方法做索引和切片</li>
</ul>
<pre><code class="lang-python">print(&quot;索引：&quot;)
rng = pd.date_range(&#39;2017/1&#39;,&#39;2017/3&#39;)
ts = pd.Series(np.random.rand(len(rng)), index = rng)
print(ts.head())
print(&quot;--------------------------------------------------&quot;)
print(&quot;基本下标位置索引：&quot;)
print(ts[0])
print(ts[:2])
print(&quot;--------------------------------------------------&quot;)
print(&quot;时间序列标签索引，支持各种时间字符串，以及datetime.datetime索引：&quot;)
print(ts[&#39;2017/1/2&#39;])
print(ts[&#39;20170103&#39;])
print(ts[datetime.datetime(2017,1,20)])

# 时间序列由于按照时间先后排序，故不用考虑顺序问题
# 索引方法同样适用于Dataframe
</code></pre>
<pre><code>索引：
2017-01-01    0.231185
2017-01-02    0.234668
2017-01-03    0.805748
2017-01-04    0.145130
2017-01-05    0.070360
Freq: D, dtype: float64
--------------------------------------------------
基本下标位置索引：
0.23118456362929074
2017-01-01    0.231185
2017-01-02    0.234668
Freq: D, dtype: float64
--------------------------------------------------
时间序列标签索引，支持各种时间字符串，以及datetime.datetime索引：
0.23466787955514912
0.8057483501832093
0.1339720263698666
</code></pre><pre><code class="lang-python">print(&quot;切片：&quot;)
rng = pd.date_range(&#39;2017/1&#39;,&#39;2017/3&#39;,freq = &#39;12H&#39;)
ts = pd.Series(np.random.rand(len(rng)), index = rng)
print(ts)
print(&quot;-------------------------------------------------&quot;)
# 和Series按照index索引原理一样，也是末端包含
print(ts[&#39;2017/1/5&#39;:&#39;2017 02 27&#39;])
print(&quot;传入月，直接得到一个切片&quot;)
print(ts[&#39;2017/2&#39;].head())
</code></pre>
<pre><code>切片：
2017-01-01 00:00:00    0.043932
2017-01-01 12:00:00    0.785976
2017-01-02 00:00:00    0.169160
2017-01-02 12:00:00    0.802500
2017-01-03 00:00:00    0.864714
                         ...   
2017-02-27 00:00:00    0.347398
2017-02-27 12:00:00    0.661076
2017-02-28 00:00:00    0.821932
2017-02-28 12:00:00    0.395027
2017-03-01 00:00:00    0.724482
Freq: 12H, Length: 119, dtype: float64
-------------------------------------------------
2017-01-05 00:00:00    0.639355
2017-01-05 12:00:00    0.447796
2017-01-06 00:00:00    0.625911
2017-01-06 12:00:00    0.019288
2017-01-07 00:00:00    0.047206
                         ...   
2017-02-25 12:00:00    0.863776
2017-02-26 00:00:00    0.302652
2017-02-26 12:00:00    0.977428
2017-02-27 00:00:00    0.347398
2017-02-27 12:00:00    0.661076
Freq: 12H, Length: 108, dtype: float64
传入月，直接得到一个切片
2017-02-01 00:00:00    0.486481
2017-02-01 12:00:00    0.051004
2017-02-02 00:00:00    0.885449
2017-02-02 12:00:00    0.148165
2017-02-03 00:00:00    0.224783
Freq: 12H, dtype: float64
</code></pre><pre><code class="lang-python">print(&quot;具有重复索引的时间序列(DatetimeIndex)：&quot;)

dates = pd.DatetimeIndex([&#39;1/1/2015&#39;,&#39;1/2/2015&#39;,&#39;1/3/2015&#39;,&#39;1/4/2015&#39;,&#39;1/1/2015&#39;,&#39;1/2/2015&#39;])
ts = pd.Series(np.random.rand(len(dates)),index=dates)
print(ts)
print(&quot;.is_unique是判断vaules是否唯一&quot;)
print(ts.is_unique)
print(&quot;.index.is_unique是判断index是否唯一&quot;)
print(ts.index.is_unique)
print(&quot;-------------------------------------------&quot;)
print(&quot;index有重复的将返回多个值&quot;)

print(ts[&#39;20150101&#39;])
print(type(ts[&#39;20150101&#39;]))
print(ts[&#39;20150104&#39;])
print(type(ts[&#39;20150104&#39;]))
print(&quot;-------------------------------------------&quot;)
print(&quot;可以通过group做分组，重复的值使用平均值处理&quot;)
print(ts.groupby(level=0).mean())
</code></pre>
<pre><code>具有重复索引的时间序列(DatetimeIndex)：
2015-01-01    0.937133
2015-01-02    0.727573
2015-01-03    0.360270
2015-01-04    0.803439
2015-01-01    0.216463
2015-01-02    0.211364
dtype: float64
.is_unique是判断vaules是否唯一
True
.index.is_unique是判断index是否唯一
False
-------------------------------------------
index有重复的将返回多个值
2015-01-01    0.937133
2015-01-01    0.216463
dtype: float64
&lt;class &#39;pandas.core.series.Series&#39;&gt;
2015-01-04    0.803439
dtype: float64
&lt;class &#39;pandas.core.series.Series&#39;&gt;
-------------------------------------------
可以通过group做分组，重复的值使用平均值处理
2015-01-01    0.576798
2015-01-02    0.469468
2015-01-03    0.360270
2015-01-04    0.803439
dtype: float64
</code></pre><h2 id="6-时间序列：重采样"><a href="#6-时间序列：重采样" class="headerlink" title="6. 时间序列：重采样"></a>6. 时间序列：重采样</h2><ul>
<li>将时间序列从一个频率转换为另一个频率的过程，并且会有数据的结合<ul>
<li>降采样：高频数据 → 低频数据，eg.以天为频率的数据转为以月为频率的数据</li>
<li>升采样：低频数据 → 高频数据，eg.以年为频率的数据转为以月为频率的数据</li>
</ul>
</li>
</ul>
<pre><code class="lang-python">print(&quot;重采样：.resample()&quot;)

rng = pd.date_range(&#39;20170101&#39;,periods=12)
ts = pd.Series(np.arange(12),index = rng)
print(ts)
print(&quot;------------------------------&quot;)
# ts.resample(&#39;5D&#39;)：得到一个重采样构建器，频率改为5天
ts_re =ts.resample(&#39;5D&#39;)

# ts.resample(&#39;5D&#39;).sum():得到一个新的聚合后的Series，聚合方式为求和
ts_re2 = ts.resample(&#39;5D&#39;).sum()
print(ts_re)
print(type(ts_re))
print(ts_re2)
print(type(ts_re2))
print(&quot;------------------------------&quot;)
print(ts.resample(&#39;5D&#39;).mean(),&#39;→ 求平均值\n&#39;)
print(ts.resample(&#39;5D&#39;).max(),&#39;→ 求最大值\n&#39;)
print(ts.resample(&#39;5D&#39;).min(),&#39;→ 求最小值\n&#39;)
print(ts.resample(&#39;5D&#39;).median(),&#39;→ 求中值\n&#39;)
print(ts.resample(&#39;5D&#39;).first(),&#39;→ 返回第一个值\n&#39;)
print(ts.resample(&#39;5D&#39;).last(),&#39;→ 返回最后一个值\n&#39;)
print(&quot;------------------------------&quot;)
# OHLC:金融领域的时间序列聚合方式 → open开盘、high最大值、low最小值、close收盘
print(ts.resample(&#39;5D&#39;).ohlc(),&#39;→ OHLC重采样\n&#39;)
</code></pre>
<pre><code>重采样：.resample()
2017-01-01     0
2017-01-02     1
2017-01-03     2
2017-01-04     3
2017-01-05     4
2017-01-06     5
2017-01-07     6
2017-01-08     7
2017-01-09     8
2017-01-10     9
2017-01-11    10
2017-01-12    11
Freq: D, dtype: int32
------------------------------
DatetimeIndexResampler [freq=&lt;5 * Days&gt;, axis=0, closed=left, label=left, convention=start, base=0]
&lt;class &#39;pandas.core.resample.DatetimeIndexResampler&#39;&gt;
2017-01-01    10
2017-01-06    35
2017-01-11    21
Freq: 5D, dtype: int32
&lt;class &#39;pandas.core.series.Series&#39;&gt;
------------------------------
2017-01-01     2.0
2017-01-06     7.0
2017-01-11    10.5
Freq: 5D, dtype: float64 → 求平均值

2017-01-01     4
2017-01-06     9
2017-01-11    11
Freq: 5D, dtype: int32 → 求最大值

2017-01-01     0
2017-01-06     5
2017-01-11    10
Freq: 5D, dtype: int32 → 求最小值

2017-01-01     2.0
2017-01-06     7.0
2017-01-11    10.5
Freq: 5D, dtype: float64 → 求中值

2017-01-01     0
2017-01-06     5
2017-01-11    10
Freq: 5D, dtype: int32 → 返回第一个值

2017-01-01     4
2017-01-06     9
2017-01-11    11
Freq: 5D, dtype: int32 → 返回最后一个值

------------------------------
            open  high  low  close
2017-01-01     0     4    0      4
2017-01-06     5     9    5      9
2017-01-11    10    11   10     11 → OHLC重采样
</code></pre><pre><code class="lang-python">print(&quot;降采样&quot;)
print(&quot;------------------------------------&quot;)
rng = pd.date_range(&#39;20170101&#39;, periods = 12)
ts = pd.Series(np.arange(1,13), index = rng)
print(ts)
print(&quot;------------------------------------&quot;)
# closed：各时间段哪一端是闭合（即包含）的，默认 左闭右闭
# 详解：这里values为0-11，按照5D重采样 → [1,2,3,4,5],[6,7,8,9,10],[11,12]
# left指定间隔左边为结束 → [1,2,3,4,5],[6,7,8,9,10],[11,12]
# right指定间隔右边为结束 → [1],[2,3,4,5,6],[7,8,9,10,11],[12]
print(ts.resample(&#39;5D&#39;).sum(),&#39;→ 默认\n&#39;)
print(ts.resample(&#39;5D&#39;, closed = &#39;left&#39;).sum(),&#39;→ left\n&#39;)
print(ts.resample(&#39;5D&#39;, closed = &#39;right&#39;).sum(),&#39;→ right\n&#39;)
print(&quot;------------------------------------&quot;)
# label：聚合值的index，默认为取左
# 值采样认为默认（这里closed默认）

print(ts.resample(&#39;5D&#39;, label = &#39;left&#39;).sum(),&#39;→ leftlabel\n&#39;)
print(ts.resample(&#39;5D&#39;, label = &#39;right&#39;).sum(),&#39;→ rightlabel\n&#39;)
</code></pre>
<pre><code>降采样
------------------------------------
2017-01-01     1
2017-01-02     2
2017-01-03     3
2017-01-04     4
2017-01-05     5
2017-01-06     6
2017-01-07     7
2017-01-08     8
2017-01-09     9
2017-01-10    10
2017-01-11    11
2017-01-12    12
Freq: D, dtype: int32
------------------------------------
2017-01-01    15
2017-01-06    40
2017-01-11    23
Freq: 5D, dtype: int32 → 默认

2017-01-01    15
2017-01-06    40
2017-01-11    23
Freq: 5D, dtype: int32 → left

2016-12-27     1
2017-01-01    20
2017-01-06    45
2017-01-11    12
Freq: 5D, dtype: int32 → right

------------------------------------
2017-01-01    15
2017-01-06    40
2017-01-11    23
Freq: 5D, dtype: int32 → leftlabel

2017-01-06    15
2017-01-11    40
2017-01-16    23
Freq: 5D, dtype: int32 → rightlabel
</code></pre><pre><code class="lang-python">print(&quot;升采样&quot;)
print(&quot;------------------------------------&quot;)
rng = pd.date_range(&#39;2017/1/1 0:0:0&#39;, periods = 5, freq = &#39;H&#39;)
ts = pd.DataFrame(np.arange(15).reshape(5,3),
                  index = rng,
                  columns = [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;])
print(ts)
print(&quot;------------------------------------&quot;)
# 低频转高频，主要是如何插值
# .asfreq()：不做填充，返回Nan
# .ffill()：向上填充
# .bfill()：向下填充
print(ts.resample(&#39;15T&#39;).asfreq())
print(ts.resample(&#39;15T&#39;).ffill())
print(ts.resample(&#39;15T&#39;).bfill())
</code></pre>
<pre><code>升采样
------------------------------------
                      a   b   c
2017-01-01 00:00:00   0   1   2
2017-01-01 01:00:00   3   4   5
2017-01-01 02:00:00   6   7   8
2017-01-01 03:00:00   9  10  11
2017-01-01 04:00:00  12  13  14
------------------------------------
                        a     b     c
2017-01-01 00:00:00   0.0   1.0   2.0
2017-01-01 00:15:00   NaN   NaN   NaN
2017-01-01 00:30:00   NaN   NaN   NaN
2017-01-01 00:45:00   NaN   NaN   NaN
2017-01-01 01:00:00   3.0   4.0   5.0
2017-01-01 01:15:00   NaN   NaN   NaN
2017-01-01 01:30:00   NaN   NaN   NaN
2017-01-01 01:45:00   NaN   NaN   NaN
2017-01-01 02:00:00   6.0   7.0   8.0
2017-01-01 02:15:00   NaN   NaN   NaN
2017-01-01 02:30:00   NaN   NaN   NaN
2017-01-01 02:45:00   NaN   NaN   NaN
2017-01-01 03:00:00   9.0  10.0  11.0
2017-01-01 03:15:00   NaN   NaN   NaN
2017-01-01 03:30:00   NaN   NaN   NaN
2017-01-01 03:45:00   NaN   NaN   NaN
2017-01-01 04:00:00  12.0  13.0  14.0
                      a   b   c
2017-01-01 00:00:00   0   1   2
2017-01-01 00:15:00   0   1   2
2017-01-01 00:30:00   0   1   2
2017-01-01 00:45:00   0   1   2
2017-01-01 01:00:00   3   4   5
2017-01-01 01:15:00   3   4   5
2017-01-01 01:30:00   3   4   5
2017-01-01 01:45:00   3   4   5
2017-01-01 02:00:00   6   7   8
2017-01-01 02:15:00   6   7   8
2017-01-01 02:30:00   6   7   8
2017-01-01 02:45:00   6   7   8
2017-01-01 03:00:00   9  10  11
2017-01-01 03:15:00   9  10  11
2017-01-01 03:30:00   9  10  11
2017-01-01 03:45:00   9  10  11
2017-01-01 04:00:00  12  13  14
                      a   b   c
2017-01-01 00:00:00   0   1   2
2017-01-01 00:15:00   3   4   5
2017-01-01 00:30:00   3   4   5
2017-01-01 00:45:00   3   4   5
2017-01-01 01:00:00   3   4   5
2017-01-01 01:15:00   6   7   8
2017-01-01 01:30:00   6   7   8
2017-01-01 01:45:00   6   7   8
2017-01-01 02:00:00   6   7   8
2017-01-01 02:15:00   9  10  11
2017-01-01 02:30:00   9  10  11
2017-01-01 02:45:00   9  10  11
2017-01-01 03:00:00   9  10  11
2017-01-01 03:15:00  12  13  14
2017-01-01 03:30:00  12  13  14
2017-01-01 03:45:00  12  13  14
2017-01-01 04:00:00  12  13  14
</code></pre><pre><code class="lang-python">print(&quot;时期重采样&quot;)
print(&quot;------------------------------------&quot;)
prng = pd.period_range(&#39;2016&#39;,&#39;2017&#39;,freq = &#39;M&#39;)
ts = pd.Series(np.arange(len(prng)), index = prng)
print(ts)

ts.index = ts.index.astype(&#39;datetime64[ns]&#39;)
print(&quot;------------------------------------&quot;)
print(ts.resample(&#39;2M&#39;).sum())  # 降采样
print(&quot;------------------------------------&quot;)
print(ts.resample(&#39;15D&#39;).ffill())  # 升采样
</code></pre>
<pre><code>时期重采样
------------------------------------
2016-01     0
2016-02     1
2016-03     2
2016-04     3
2016-05     4
2016-06     5
2016-07     6
2016-08     7
2016-09     8
2016-10     9
2016-11    10
2016-12    11
2017-01    12
Freq: M, dtype: int32
------------------------------------
2016-01-31     0
2016-03-31     3
2016-05-31     7
2016-07-31    11
2016-09-30    15
2016-11-30    19
2017-01-31    23
Freq: 2M, dtype: int32
------------------------------------
2016-01-01     0
2016-01-16     0
2016-01-31     0
2016-02-15     1
2016-03-01     2
2016-03-16     2
2016-03-31     2
2016-04-15     3
2016-04-30     3
2016-05-15     4
2016-05-30     4
2016-06-14     5
2016-06-29     5
2016-07-14     6
2016-07-29     6
2016-08-13     7
2016-08-28     7
2016-09-12     8
2016-09-27     8
2016-10-12     9
2016-10-27     9
2016-11-11    10
2016-11-26    10
2016-12-11    11
2016-12-26    11
Freq: 15D, dtype: int32
</code></pre><pre><code class="lang-python">

</code></pre>

            </div>
            <hr>
            <div>
              <p>
                
                  <span>
                <i class="iconfont icon-inbox"></i>
                    
                      <a class="hover-with-bg" href="/categories/Code-One-Hour/">Code One Hour</a>
                      &nbsp;
                    
                      <a class="hover-with-bg" href="/categories/Code-One-Hour/Pandas/">Pandas</a>
                      &nbsp;
                    
                  </span>&nbsp;&nbsp;
                
                
                  <span>
                <i class="iconfont icon-tag"></i>
                    
                      <a class="hover-with-bg" href="/tags/Programming/">Programming</a>
                    
                      <a class="hover-with-bg" href="/tags/Code/">Code</a>
                    
                      <a class="hover-with-bg" href="/tags/Code-One-Huor/">Code One Huor</a>
                    
                  </span>
                
              </p>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/07/18/ML_Andrew_Pex5_Regularized_Linear_Regression_and_Bais_Vs_Variance/">
                        <i class="fa fa-chevron-left"></i>
                        <span class="hidden-mobile">机器学习程序练习5:正则化线性回归和偏差、方差</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/07/15/ML_Andrew_Pex4_Neural_Network_Learning/">
                        <span class="hidden-mobile">机器学习程序练习4:神经网络学习</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="fa fa-chevron-right"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

              
                <!-- Comments -->
                <div class="comments" id="comments">
                  
                  
  <script defer src="https://utteranc.es/client.js"
          repo="YinGuoX/commit-utterance"
          issue-term="pathname"
  
          label="utterances"
    
          theme="github-light"
          crossorigin="anonymous"
  >
  </script>


                </div>
              
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="h5"><i class="far fa-list-alt"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">

  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
	  <div>
  <span id="timeDate">载入天数...</span>
  <span id="times">载入时分秒...</span>
  <script>
  var now = new Date();
  function createtime(){
      var grt= new Date("02/14/2020 00:00:00");//此处修改你的建站时间或者网站上线时间
      now.setTime(now.getTime()+250);
      days = (now - grt ) / 1000 / 60 / 60 / 24;
      dnum = Math.floor(days);
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
      hnum = Math.floor(hours);
      if(String(hnum).length ==1 ){
          hnum = "0" + hnum;
      }
      minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes);
      if(String(mnum).length ==1 ){
                mnum = "0" + mnum;
      }
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds);
      if(String(snum).length ==1 ){
                snum = "0" + snum;
      }
      document.getElementById("timeDate").innerHTML = "已仰望星空：&nbsp"+dnum+"&nbsp天";
      document.getElementById("times").innerHTML = hnum + "&nbsp小时&nbsp" + mnum + "&nbsp分&nbsp" + snum + "&nbsp秒";
  }
  setInterval("createtime()",250);
  </script>
</div>
<p id="hitokoto">:D 获取中...</p>
<script>
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      const hitokoto = document.getElementById('hitokoto')
      hitokoto.innerText = data.hitokoto
      })
      .catch(console.error)
</script>

  </div>


</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/main.js" ></script>


  <script  src="/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc > p').css('visibility', 'visible');
      }
    });
  </script>





  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>





  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




<!-- Plugins -->



  <script  src="https://cdn.staticfile.org/prettify/188.0.0/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').each(function () {
        const pre = $(this);
        if (pre.find('code.mermaid').length > 0) {
          return;
        }
        pre.addClass('prettyprint  linenums');
      });
      prettyPrint();
    })
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Code One Hour：Pandas-Base-Two&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 90,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>


















</body>
</html>
